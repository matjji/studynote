<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/index.css"/>
    <link rel="stylesheet" href="css/logo.css"/>
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/reset.css" />
    <script src="https://kit.fontawesome.com/dd98fef116.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="logo">
        <h1>
            <a href="http://www.naver.com" class="logo_n">
            </a>
        </h1>
    </div>
    <!--form 시작-->
    <form class="join_form">
        <!--내용을 담는 div.container-->
        <div class="container">
            <!--내용이 들어가는 div.content-->
            <div class="content">
                <!--제목-->
                <h3 class="title"><label for="id">아이디</label></h3>
                <!-- input이 들어가는 상자-->
                <div class="box_xs boxjs">
                    <input type="text" name="id" id="id"  maxlength="20"/>
                    <span class="title_m">@naver.com</span>
                </div>
            </div>
            <!--내용이 들어가는 div.content-->
            <div class="content">
                <!--제목-->
                <h3 class="title"><label for="pw">비밀번호</label></h3>
                <!-- input이 들어가는 상자-->
                <div class="box_sm boxjs">
                    <input type="password" name="pw" id="pw" maxlength="20"/>
                    <!--icon이 들어갈 작은상자-->
                    <span class="box_sm-span">
                        <i class="fas fa-lock fa-la"></i>
                    </span>
                </div>
            </div>
            <!--내용이 들어가는 div.content-->
            <div class="content">
                <!--제목-->
                <h3 class="title"><label for="pw_re">비밀번호 재확인</label></h3>
                <!-- input이 들어가는 상자-->
                <div class="box_sm boxjs">
                    <input type="password" name="pw_re" id="pw_re" maxlength="20"/>
                    <!--icon이 들어갈 작은상자-->
                    <span class="box_sm-span">
                        <i class="fas fa-lock fa-la"></i>
                    </span>
                </div>
            </div>
            <!--내용이 들어가는 div.content-->
            <!--margin-top 적용-->
            <div class="content mar-top">
                <!--내용이 들어가는 div.content-->
                <div class="content">
                    <!--제목-->
                    <h3 class="title"><label for="name" maxlength="40">이름</label></h3>
                    <!--input이 들어가는 상자-->
                    <div class="box boxjs">
                        <input type="text" name="name" id="name"/>
                    </div>
                </div>
                <!--내용이 들어가는 div.content-->
                <div class="content">
                    <!--제목-->
                    <h3 class="title"><label for="yy">생년월일</label></h3>
                    <!--float 마감제-->
                    <div class="clear">
                        <!--float 및 margin-right 적용-->
                        <div class="left mar-right">
                            <!--input을 담은 상자-->
                            <div class="box boxjs">
                                <input type="text" id="yy" placeholder="년(4자)" maxlength="4">
                            </div>
                        </div>
                        <!--float 및 margin-right 적용-->
                        <div class="left mar-right">
                            <!--select를 담은 상자-->
                            <div class="box boxjs">
                                <select class="select_sel" id="mm">
                                    <option value="">월</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                </select>
                            </div>
                        </div>
                        <!--float 적용-->
                        <div class="left">
                            <!--input을 담은 상자-->
                            <div class="box boxjs">
                                <input type="text" id="dd" placeholder="일" maxlength="2">
                            </div>
                        </div>
                    </div>
                </div>
                <!--내용이 들어가는 div.content-->
                <div class="content">
                    <!--제목-->
                    <h3 class="title"><label for="gender">성별</label></h3>
                    <!--select를 담은 상자-->
                    <div class="box boxjs">
                        <select class="select_sel" id="gender">
                            <option value="" selected>성별</option>
                            <option value="male">남자</option>
                            <option value="female">여자</option>
                            <option value="no">선택 안함</option>
                        </select>
                    </div>
                </div>
                <!--내용이 들어가는 div.content-->
                <div class="content">
                    <!--제목-->
                    <h3 class="title">
                        <label for="email">
                            본인 확인 이메일
                        </label>
                        <!--작은 제목-->
                        <span class="title_sm">(선택)</span>
                    </h3>
                    <!--input을 담은 상자-->
                    <div class="box boxjs">
                        <input type="text" name="email" id="email" placeholder="선택입력" maxlength="100"/>
                    </div>
                </div>
            </div>
            <!--내용이 들어가는 div.content-->
            <!--margin-top 적용-->
            <div class="content mar-top">
                <!--제목-->
                <h3 class="title"><label for="tel">휴대전화</label></h3>
                <!--select를 담은 상자-->
                <div class="box boxjs">
                    <select id="nation" name="nation" class="select_sel">
                        <option value="81">일본 +81</option>
                        <option value="82" selected>대한민국 +82</option>
                        <option value="84">베트남 +84</option>
                        <option value="852">홍콩 +852</option>
                        <option value="853">마카오 +853</option>
                        <option value="855">캄보디아 +855</option>
                        <option value="856">라오스 +856</option>
                        <option value="86">중국 +86</option>
                        <option value="880">방글라데시 +880</option>
                        <option value="886">대만 +886</option>
                    </select>
                </div>
                <!--작은 margin-top 적용 및 float 마감제-->
                <div class="mar-top_xs clear">
                    <!--input을 담은 상자, float 버튼 및 margin-right 적용-->
                    <div class="box left-lg mar-right boxjs">
                        <input type="tel" id="tel" name="tel" placeholder="전화번호 입력" maxlength="16"/>
                    </div>
                    <button type="submit" class="btn">인증번호 받기</button>
                </div>
                <!--input을 담은 상자-->
                <div class="box mar-top_xs boxjs">
                    <input type="tel" id="auth" name="auth" placeholder="인증번호 입력하세요" maxlength="4" disabled/>
                </div>
            </div>
        </div>
        <div class="btn_area">
            <button type="submit" class="sub_btn">
                <span>가입하기</span>
            </button>
        </div>
    </form>
    <div class="footer clear">
        <ul>
            <li> <a href="http://policy.naver.com/rules/service.html">이용약관</a> </li>
            <li><strong><a href="http://policy.naver.com/policy/privacy.html">개인정보처리방침</a></strong></li>
            <li><a href="http://policy.naver.com/rules/disclaimer.html">책임의 한계와 법적고지</a></li>
            <li><a href="https://help.naver.com/support/alias/membership/p.membership/p.membership_26.naver" target="_blank">회원정보 고객센터</a> </li>
        </ul>
        <address>
            <span class="pad-left">
                <a href="http://www.naver.com" class="logo_sm">
                </a>
            </span>
            <span class="pad-left">Copyright</span>
            <a href="http://www.navercorp.com/">NAVER Corp.</a>
            <span>All Rights Reserved</span>
        </address>
    </div>
    <script src="https://kit.fontawesome.com/dd98fef116.js" crossorigin="anonymous"></script>
    <script src="js/BadRequestException.js"></script>
    <script src="js/RegexHelper.js"></script>
    <script>
        //input태그에서 focus클래스 추가
        //input태그와 select 태그의 부모인 boxjs클래스를 찾아 focus클래스를 추가한다.
        document.querySelectorAll("input").forEach((v, i) => {
            // 클릭할 때마다 추가되는 focus클래스.
            v.addEventListener("click", e => {
                const current = e.currentTarget
                const boxParents = current.closest('.boxjs')
                boxParents.classList.remove("focus")
            })
            v.addEventListener("click", e => {
                const current = e.currentTarget
                const boxParents = current.closest('.boxjs')
                boxParents.classList.add("focus")
            })
            //boxjs클래스를 벗어나면 focus클래스 제거.
            v.addEventListener("blur", e => {
                const current = e.currentTarget
                const boxParents = current.closest('.boxjs')
                boxParents.classList.remove("focus")
            })
        })

        //select태그에서 focus클래스 추가
        document.querySelectorAll("select").forEach((v, i) => {
            // 클릭할 때마다 추가되는 focus클래스.
            v.addEventListener("click", e => {
                const current = e.currentTarget
                const boxParents = current.closest('.boxjs')
                boxParents.classList.remove("focus")
            })
            v.addEventListener("click", e => {
                const current = e.currentTarget
                const boxParents = current.closest('.boxjs')
                boxParents.classList.add("focus")
            })
            //boxjs클래스를 벗어나면 focus클래스 제거.
            v.addEventListener("blur", e => {
                const current = e.currentTarget
                const boxParents = current.closest('.boxjs')
                boxParents.classList.remove("focus")
            })
        })

        document.querySelector(".join_form").addEventListener("submit", e => {
            e.preventDefault();

            const regexHelper = new RegexHelper();
            try {
                /** 아이디 검사*/
                regexHelper.value("#id", "필수 정보입니다.")
                regexHelper.minLength("#id",5, "5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.")
                regexHelper.engNumSym("#id", "5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.")
                
                /** 비밀번호 검사*/
                regexHelper.value("#pw", "필수 정보입니다.")
                regexHelper.pwMinLength("#pw", 8, "8~16자 영문 대 소문자, 숫자, 특수문자를 사용하세요.")
                regexHelper.engNumSymbol("#pw", "8~16자 영문 대 소문자, 숫자, 특수문자를 사용하세요.")

                if (true) {
                    let pw = document.querySelector("#pw");
                    const parent1 = pw.closest(".box_sm")
                    const span1 = parent1.querySelector('.box_sm-span')
                    span1.innerHTML = "안전" + `<i class="fas fa-lock fa-la"></i>`
                    span1.classList.add('pw_true');
                } 
                regexHelper.compareTo("#pw", "#pw_re", "비밀번호가 일치하지 않습니다.")

                if (true) {
                    let pwRe = document.querySelector("#pw_re");
                    const parent2 = pwRe.closest(".box_sm");
                    const span2 = parent2.querySelector('.box_sm-span');
                    span2.innerHTML = `<i class="fas fa-lock fa-la"></i>`
                    span2.classList.add('pw_true');
                }

                /** 이름 검사*/
                regexHelper.noSpaceValue("#name", "필수 정보입니다.")
                regexHelper.value("#name","한글과 영문 대 소문자를 사용하세요. (특수기호, 공백 사용 불가)" )
                regexHelper.korEng("#name", "한글과 영문 대 소문자를 사용하세요. (특수기호, 공백 사용 불가)")

                /** 년도 검사*/
                regexHelper.num("#yy", "태어난 년도 4자리를 정확하게 입력하세요.")
                /** 월 검사*/
                regexHelper.value("#mm","태어난 월을 선택하세요.")
                /** 일 검사*/
                regexHelper.value("#dd","태어난 일(날짜) 2자리를 정확하게 입력하세요.")
                regexHelper.dateTimeValue("#yy", "#mm", "#dd", "생년월일을 다시 확인 해주세요.")
                regexHelper.noSpaceNum("#dd", "생년월일을 다시 확인해주세요.")
                regexHelper.timeValue("#yy", "#mm", "정말이세요?")
                /** 미래인 검사*/
                regexHelper.futureTimeValue("#yy", "#mm", "#dd", "미래에서 오셨군요. ^^")
                /** 만14세 미만 검사*/
                regexHelper.underTimeValue("#yy", "#mm", "#dd", "만 14세 미만의 어린이는 보호자 동의가 필요합니다.")
                /**성별 검사*/
                regexHelper.value("#gender", "필수 정보입니다.")
                /** 이메일 검사*/
                regexHelper.email("#email", "이메일 주소를 다시 확인해주세요.")
            
                /** 핸드폰 검사*/
                regexHelper.value("#tel", "필수 정보입니다.")
                regexHelper.cellPhone("#tel", "형식에 맞지 않는 번호입니다.")
                /** disabled = false 면 활성*/
                document.querySelector("#auth").disabled = false;
                regexHelper.value("#auth", "필수 정보입니다.")
                regexHelper.minLength("#auth",4 ,"인증번호는 4자리 숫자입니다.")
            } catch(e) {
                alert(e.message);
                console.error(e);
                document.querySelector(e.selector).focus();
                return;
            }
        })
    </script>
</body>
</html>